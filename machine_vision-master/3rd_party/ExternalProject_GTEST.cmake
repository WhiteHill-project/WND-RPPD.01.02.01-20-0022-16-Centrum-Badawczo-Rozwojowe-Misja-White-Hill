find_package(Threads)

libname(gtest gtest)
ExternalProject_Add(
   GTEST_BUILD
   URL https://github.com/google/googletest/archive/release-1.8.0.zip
   UPDATE_COMMAND ""
   INSTALL_DIR ${ThirdParty_Install_Dir}
   CMAKE_ARGS -DCMAKE_TOOLCHAIN_FILE=${CMAKE_TOOLCHAIN_FILE} -DCMAKE_STAGING_PREFIX:PATH=${ThirdParty_Install_Dir} -DCMAKE_INSTALL_PREFIX:PATH=<INSTALL_DIR>
   CMAKE_GENERATOR "${CMAKE_GENERATOR}"
   CMAKE_GENERATOR_TOOLSET ${CMAKE_GENERATOR_TOOLSET}
   BUILD_BYPRODUCTS ${gtest_LIBRARY_STATIC}
)
ADD_LIBRARY(gtest_IMP STATIC IMPORTED GLOBAL)
add_dependencies(gtest_IMP GTEST_BUILD)
set_property(TARGET gtest_IMP PROPERTY IMPORTED_LOCATION ${gtest_LIBRARY_STATIC} )

set_property(TARGET gtest_IMP APPEND PROPERTY INTERFACE_LINK_LIBRARIES ${CMAKE_THREAD_LIBS_INIT})
